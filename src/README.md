---
# home: true
icon: home
title: STOmics Cloud 使用手册
heroImage: /logo.svg
heroText: Help center
tagline: You can place the description of the project here.
# actions:
#   - text: How to Use 💡
#     link: /demo/
#     type: primary

#   - text: Docs
#     link: /guide/

# features:
#   - title: Markdown Enhance
#     icon: markdown
#     details: Add align, sup/sub script, footnote, tasklist, tex, flowchart, diagram, mark and presentation support in markdown
#     link: https://theme-hope.vuejs.press/guide/markdown/

#   - title: Slide page
#     icon: slides
#     details: Adding slide pages to display things you like
#     link: https://theme-hope.vuejs.press/guide/layout/slides.html

#   - title: Layout enhancement
#     icon: layout
#     details: Adding breadcrumb, footer, improved navbar, improved page nav and etc.
#     link: https://theme-hope.vuejs.press/guide/layout/

#   - title: Pageviews and comments
#     icon: comment
#     details: Start pageview statistics and comment support with Waline
#     link: https://theme-hope.vuejs.press/guide/feature/comment.html

#   - title: Article information
#     icon: info
#     details: Add author, writing date, reading time, word count and other information to your article
#     link: https://theme-hope.vuejs.press/guide/feature/page-info.html

#   - title: Blog support
#     icon: blog
#     details: Listing your articles with their dates, tags and categories with some awesome layouts
#     link: https://theme-hope.vuejs.press/guide/blog/

#   - title: Custom theme color
#     icon: palette
#     details: Supports custom theme colors and allows users to switch between preset theme colors
#     link: https://theme-hope.vuejs.press/guide/interface/theme-color.html

#   - title: Dark Mode
#     icon: contrast
#     details: Switch between light and dark modes freely
#     link: https://theme-hope.vuejs.press/guide/interface/darkmode.html

#   - title: Full A11y support
#     icon: support
#     details: Full support of accessibility in your site
#     link: https://theme-hope.vuejs.press/guide/interface/accessibility.html

#   - title: Article Encryption
#     icon: lock
#     details: Encrypt you articles based on page links, so that only the one you want could see them
#     link: https://theme-hope.vuejs.press/guide/feature/encrypt.html

#   - title: Copy button
#     icon: copy
#     details: Copy codes with one click in code blocks
#     link: https://theme-hope.vuejs.press/guide/feature/copy-code.html

#   - title: Image preview
#     icon: pic
#     details: Support viewing, zooming, sharing your page images like a gallery
#     link: https://theme-hope.vuejs.press/guide/feature/photo-swipe.html

#   - title: SEO enhancement
#     icon: config
#     details: Optimize pages for search engines
#     link: https://theme-hope.vuejs.press/guide/advanced/seo.html

#   - title: Sitemap
#     icon: sitemap
#     details: Generate a Sitemap for your site
#     link: https://theme-hope.vuejs.press/guide/advanced/sitemap.html

#   - title: Feed support
#     icon: rss
#     details: Generate feed to allow users to subscribe it
#     link: https://theme-hope.vuejs.press/guide/advanced/feed.html

#   - title: PWA support
#     icon: mobile
#     details: Make your site more like an APP
#     link: https://theme-hope.vuejs.press/guide/advanced/pwa.html

#   - title: More new features
#     icon: more
#     details: Including icon support, fullscreen button, etc.
#     link: https://theme-hope.vuejs.press/guide/feature/

copyright: false
footer: For questions and suggestions, please contact&#58 <a href="mailto:stereo@genomics.cn">stereo@genomics.cn</a> | Copyright© All Rights Reserved 2023 BGI Research
---
<!-- **STOmics Cloud 使用手册** -->

## 1\. **时空组学分析平台简介**

###  1.1 **平台介绍**

时空组学分析云平台（STOmics
Cloud）是以时空为特色的多组学数据分析平台，可以管理和分析多组学数据。
STOmics
Cloud以项目为核心，用户可快速将数据和工具整合到项目，实现分析过程可追溯，结果可复现，知识可分享，项目可协作，形成项目分析体系。并通过一个用户友好的门户，提供灵活易于使用的无代码标准和高级分析，高分辨率可视化分析，以及个性化的分析服务，任何注册登录的用户可以轻松在平台上访问，分析，使用和共享数据和工具。

### 1.2 **平台名称及地址**

平台名称：

中文：时空组学分析云平台（简称"时空云"）

英文：STOmics Cloud

平台访问地址：www.stomics.tech/sap

### 1.3 **运行环境**

对于本地电脑配置，建议最低需4G内存，网速不低于20Mbps。

## 2\. **使用说明**

### 2.1 **注册和登录**

#### 2.1.1 **注册**

点击首页导航栏"登录/注册"按钮的"注册"字段进入注册账号页面。根据页面提示填写完整信息，点击"获取验证码"后，登录注册邮箱，根据验证邮件中的验证码填写。信息无误后勾选"我已阅读并同意遵守《用户协议》和《隐私政策》"确认注册。

2.1.2 **登录**

点击首页导航栏"登录/注册"按钮的"登录"字段进入账户登录页面，根据页面提示填写内容，点击"登录"按钮确认登录。BGI内部用户开通权限后可通过点击"BGI登录"，在跳转页面登录。

点击"注册账号"可跳转至注册界面。如忘记密码，点击"找回密码"，跳转至密码重置页面。

![](/logo.svg){width="5.75in" height="2.90625in"}

2.1.3 **忘记密码和修改密码**

密码找回需使用注册时填写的电子邮箱协助完成。根据页面提示填写完整邮箱地址，点击"获取验证码"后，填写新密码，点击"确认"完成重置。

![](/logo.svg){width="5.75in" height="2.4895833333333335in"}

如需要修改密码，可通过点击导航栏中用户名下拉选项中的"个人资料"，点击"修改密码"跳转。在"修改密码"页面根据提示填写旧密码和新密码，再次确认后点击"确认"完成修改。

![](/logo.svg){width="5.75in" height="2.6041666666666665in"}

![](/logo.svg){width="5.75in" height="2.8125in"}

2.1.4 **修改资料**

如需要修改个人资料，可通过点击导航栏中用户名下拉选项中的"个人资料"，点击"修改资料"，在弹出页面中根据需要修改信息。确认无误后点击"确认"保存修改。

![](/logo.svg){width="5.75in" height="2.6145833333333335in"}

![](/logo.svg){width="5.75in" height="3.3229166666666665in"}

> 2.2 **项目管理**
>
> 2.2.1 **项目管理**

1.查看项目：项目管理页面显示我参与的项目总数，项目以卡片式展示给用户。每个项目卡片上展示项目编号、项目名称、项目类型、项目负责人、创建日期、项目芯片数（包括已使用芯片数和总数）、项目数据数目和任务数目（包括已完成任务和总任务数）信息，同时还加入了项目芯片、项目数据和项目任务的页面入口。鼠标悬停在"项目芯片"、"项目数据"、"项目任务"处可查看对应的数据说明。用户点击项目名称、项目芯片进入项目芯片页面，点击项目数据进入项目数据页面，点击项目任务进入项目任务页面。卡片翻页逻辑（包括项目卡页，任务卡片页和芯片卡片页）：滚动鼠标即可实现数据翻页，点击一键返回顶部按钮，可直接回到页面顶部。

2.搜索项目：用户可在搜索框，输入项目编号或项目名称，切片编号或时空芯片编号（SN），任务编号等进行查询检索。搜索功能支持模糊搜索。

![](/logo.svg){width="5.75in" height="2.5833333333333335in"}

![](/logo.svg){width="5.75in" height="2.5729166666666665in"}

3.新建项目

1）新建项目入口

![](/logo.svg){width="5.75in" height="1.8229166666666667in"}

2）新建项目页面

定义项目所属片区、项目名称、备注等信息；

项目负责人信息默认取当前新建项目用户的个人资料，且不可更改；

点击完成创建后项目创建成功，显示在项目列表。

![](/logo.svg){width="5.75in" height="3.15625in"}

3）关联芯片

该步骤可忽略，后续通过项目设置-关联芯片页面进行当前项目的芯片关联；

【选择项目】可以看到当前角色在既往商产付项目中为项目负责人或者项目管理员的项目列表；

【选择芯片】可以看到当前选中项目的芯片列表，支持复选，选中的芯片数量回显到项目名称后面；

已关联的芯片，不支持取消关联。

![](/logo.svg){width="5.75in" height="3.9375in"}

2.2.2 **项目芯片**

展示当前项目所有的芯片列表，默认卡片式，可切换至列表模式。

新建项目的芯片列表展示关联的芯片列表。

2.2.2.1 **项目芯片卡片展示**

1.点击【我的项目】卡片上"项目名称"和"项目芯片数量"可查看当前项目所有的芯片列表-卡片页；

2.搜索框支持当前页面数据的模糊查询；

3.点击【批量上传FASTQ】进入批量上传FASTQ页面；

4.点击【切换布局】切换芯片list展示；

5.芯片卡片说明：

1）黄框圈的两个状态说明：测序完成/测序中，表示芯片上是否上传FASTQ数据的状态；图像分析完成/图像分析中，是否有已完成的图像预处理分析结果。

2）缩略图说明：按芯片规格配制不同的缩略图；

3）入口说明：

上传FASTQ数据，点击弹出上传FASTQ数据弹框（详情见3.3.2）；

上传IPR数据，点击弹出上传IPR数据弹框；

运行RNA-Seq分析任务，点击进入芯片单个任务投递页面；

![](/logo.svg){width="5.75in" height="2.7083333333333335in"}

2.2.2.2 **项目芯片列表展示**

通过列表的方式展示芯片信息，

1）芯片搜索支持列字段组合查询；

2）批量投递任务入口，点击进入批量投递任务页面；

3）
支持设置列表显示的字段，列字段里包括样本编号、样本名称、样本类型、物种、组织、样本份数、备注、分析进度、送样日期等
，展示芯片与样本、切片等信息的关联关系；

![](/logo.svg){width="5.75in" height="2.78125in"}

2.2.3 **时空芯片详情页**

时空芯片详情页包括芯片信息、测序数据、图像数据、任务与结果四个模块。

2.2.3.1 **芯片信息**

芯片信息模块，展示芯片的基础信息，包括芯片名称、样本编号、物种组织，关联芯片，芯片规格、芯片尺寸和备注。

![](/logo.svg){width="5.75in" height="1.4791666666666667in"}

2.2.3.2 **测序数据**

测序数据模块展示芯片测序结果数据。

![](/logo.svg){width="5.75in" height="2.2604166666666665in"}

2.2.3.2.1 **测序数据上传**

点击"测序数据"栏右上角的"上传FASTQ"，在弹出窗口"Add
Fastq"中根据提示填写测序数据信息。

![](/logo.svg){width="5.75in" height="2.2708333333333335in"}

Step1：选择上传FASTQ类型（PE或SE），填写CID length、CID start、Read
length、MID length、MID start、MID location（read1或read2）。

![](/logo.svg){width="5.75in" height="2.78125in"}

Step2：点击"添加"在表格中填写Fastq文件路径、Lane号和备注信息。点击"Confirm"确认上传。

![](/logo.svg){width="5.75in" height="2.78125in"}

Fastq文件信息确认添加后，上述信息将出现在测序数据表格中。用户可根据需要删除该条输入。

![](/logo.svg){width="5.75in" height="2.21875in"}

2.2.3.2.2 **标准RNA-Seq分析任务投递**

用户可点击"运行RNA-Seq分析任务"开始投递时空组标准RNA-Seq分析任务。

![](/logo.svg){width="5.75in" height="2.2395833333333335in"}

step1：选择流程版本；

![](/logo.svg){width="5.75in" height="2.78125in"}

step2：选择需要分析的测序数据；

![](/logo.svg){width="5.75in" height="2.78125in"}

step3：选择图像，直接点击"下一步"；

![](/logo.svg){width="5.75in" height="2.78125in"}

step4：选择参考基因组及配置流程参数。如测序Fastq文件很大，可在参数"Split
Count"填写拆分份数（整数类型，默认为1，表示拆分为一份，即不拆分）。

![](/logo.svg){width="5.75in" height="2.6770833333333335in"}

step5：确认所有入参文件及流程参数后点击"提交"投递任务。

![](/logo.svg){width="5.75in" height="2.625in"}

2.2.3.2.3 **标准RNA-Seq分析任务投递状态确认邮件**

分析任务投递成功后会跳转回时空芯片分析管理页面，用户注册邮箱会收到任务投递成功通知邮件，内容包含芯片分析管理页面的链接、任务编号、时空芯片编号、任务状态、和投递时间。

![](/logo.svg){width="5.75in" height="3.9166666666666665in"}

> 2.2.3.3 **图像数据**

STOmics
Cloud分析平台支持显微拍照QC后的样本切片染色图与基因表达热图的图像配准。用户可自行上传配准图像，提交配准任务。

2.2.3.3.1.1 **组织染色图上传**

点击"图像数据"栏右上角的"上传ipr文件"，点击"选择文件"选择本地图片，最后点击"确认"上传。

![](/logo.svg){width="5.75in" height="2.03125in"}

![](/logo.svg){width="5.75in" height="2.65625in"}

2.2.3.3.1.2 **图像查看和处理**

点击查看报告，可查看图像预处理报告。

![](/logo.svg){width="5.75in" height="2.0416666666666665in"}

点击图像右下角\...图标，可对图像进行操作，包括图像手动组织分割，图像文件下载，关闭图像和删除图像。

![](/logo.svg){width="5.75in" height="2.0104166666666665in"}

图像组织分割，点击"图像tissuecut"按钮进行图像手动组织分割。具体操作详见《tissuecut手动掩模线上工具说明书》

![](/logo.svg){width="5.75in" height="2.6041666666666665in"}

图像右下角的T图标表示该图为图像手动组织分割后的图片。

![](/logo.svg){width="5.75in" height="1.9479166666666667in"}

2.2.3.4 **任务与结果**

"任务与结果"栏展示标准RNA-Seq分析、自定义区域（套索）分析和细胞注释分析任务的进行状态。STOmics
Cloud平台标准RNA-Seq分析流程可帮助用户分析测序下机Fastq数据，生成带有空间位置信息的基因表达矩阵。后续用户可查看该矩阵对应的可视化基因表达空间分布情况、测序和表达统计情况、以及聚类分析结果。同时，可视化报告中提供套索和细胞注释功能模块，可以帮助用户进行基于基因表达热图的交互式自由探索。

2.2.3.4.1 **标准RNA-Seq分析任务查看**

标准RNA-Seq分析任务在"测序数据"栏投递后，任务将以投递时间由新到旧的顺序展示在"任务于结果"栏。该栏展示内容依次为基因表达热图缩略图、标准RNA-Seq分析任务编号、流程名称、参考基因组、创建人、提交时间、更新时间、任务状态和操作。操作包括查看可视化报告、查看分析统计报告、下载分析结果、查看任务详细信息和重新运行任务。

![](/logo.svg){width="5.75in" height="2.6666666666666665in"}

用户可点击任务栏右侧的下拉箭头，展开该条分析任务，查看与其相关的其他任务。

![](/logo.svg){width="5.75in" height="1.2083333333333333in"}

每一个标准RNA-Seq分析任务成功分析完成后，缩略图位置由灰色芯片示意图更新为基因表达热图缩略小图，运行状态更新为"success"，同时生成可视化分析报告。用户可点击该任务"查看报告"按钮，进入可视化报告展示页面。

![](/logo.svg){width="5.75in" height="0.65625in"}

![](/logo.svg){width="5.75in" height="2.6458333333333335in"}

如用户希望重新分析，点击"重新运行"将跳转至标准RNA-Seq分析任务投递页面，根据提示重新填写后，等待分析完成。

![](/logo.svg){width="5.75in" height="0.6458333333333334in"}

![](/logo.svg){width="5.75in" height="2.4479166666666665in"}

2.2.3.4.2 **配准任务查看**

配准任务为将QC和预处理过后的图像与分析过后的表达矩阵文件进行配准。

配准任务展示的基本信息依次为配准任务编号、芯片号、提交时间、任务状态和操作。操作包括可视化报告、统计报告和任务详情。

![](/logo.svg){width="5.75in" height="1.78125in"}

点击可视化报告，进入可视化报告展示页面。

![](/logo.svg){width="5.75in" height="1.75in"}

![](/logo.svg){width="5.75in" height="2.4375in"}

2.2.3.4.3 **套索任务查看**

套索任务为可视化报告Visualization页面自定义分析功能的套索功能投递的任务。用户可在基因表达热图上选择自定义区域进行数据的提取。套索任务投递操作见。

用户可在每个标准RNA-Seq分析任务生成的可视化报告中自由选取区域套索，套索成功后可在对应标准RNA-Seq分析任务展开栏中的套索任务表格查看该任务的基本信息。套索任务展示的基本信息依次为配准任务编号、芯片号、提交时间、任务状态和操作。操作包括下载数据，下载注释结果和重新运行。

![](/logo.svg){width="5.75in" height="0.8541666666666666in"}

点击"重新投递"任务，弹出重跑注释任务弹窗。设置binsize之后，进行任务重新投递。

![](/logo.svg){width="5.75in" height="1.5833333333333333in"}

2.2.4 **项目数据**

展示当前项目里所有的数据，包括原始数据，过程数据，结果数据和用户在项目数据模块上传的数据。

2.2.4.1 **FILES文件夹数据**

1.展示项目下的所有测序数据，包括创建人、Lane号、测序类型、Q30、Q20、reads总数、碱基总数、检查错误率、下机时间、状态、备注和操作。

2.支持按SE和PE切换展示两种不同类型的测序数据。

2.2.4.2 **图像数据**

展示项目下所有的图像数据，包括图像预处理分析产出的数据、tissuecut产出的数据和用户手动上传的数据；

2.2.4.3 **mask数据**

展示当前用户可见的所有SN对应的mask数据，可通过镭速客户端下载。

2.2.4.3.1 **mask文件下载**

Step1：下载并安装镭速客户端；

![](/logo.svg){width="5.75in" height="2.78125in"}

Step2：点击"传输"，将文件从安全储存区转移至可下载区。传输完成，文件状态将变为"已完成"；

![](/logo.svg){width="5.75in" height="2.78125in"}

Step3：文件传输完成后，点击"下载"，启用镭速客户端下载mask文件；

  ----------------------------------------------------- -----------------------------------------------------
  ![](/logo.svg){width="2.7083333333333335in"   ![](/logo.svg){width="2.7083333333333335in"
  height="1.3125in"}                                    height="1.3125in"}

  ----------------------------------------------------- -----------------------------------------------------

2.2.4.3.2 **mask下载引导**

点击"提示"按钮查看下载引导，首次进入页面时自动触发该引导。

![](/logo.svg){width="5.75in" height="2.78125in"}

  --------------------------------------- --------------------------------------- ---------------------------------------
  ![](/logo.svg){width="1.75in"   ![](/logo.svg){width="1.75in"   ![](/logo.svg){width="1.75in"
  height="0.84375in"}                     height="0.84375in"}                     height="0.84375in"}

  --------------------------------------- --------------------------------------- ---------------------------------------

2.2.5 **流程分析**

通过流程分析的入口，可进入高级分析。时空转录组高级分析在用户在完成SAW标准分析后，帮助用户进一步进行高级分析，包括数据预处理，分群，marker
gene，自动注释，手动注释，拟时序，细胞互作和功能富集分析。

2.2.5.1.1 **分析入口**

**1）流程分析入口**

通过点击流程分析入口进入。

![](/logo.svg){width="5.75in" height="2.5833333333333335in"}

点击选择按钮进行表达矩阵gef文件的选择

![](/logo.svg){width="5.75in" height="2.59375in"}

![](/logo.svg){width="5.75in" height="2.8958333333333335in"}

2）任务入口

在STOmics
Cloud任务列表页，每个完成SAW标准分析任务，提供高级分析入口，点击高级分析按钮，进入分析。

![](/logo.svg){width="5.75in" height="2.75in"}

高级分析入口页面

2.2.5.1.2 **加载gef数据**

从高级分析入口进入后，系统将自动加载SAW分析后的表达矩阵文件，包括cgef文件和bgef文件。您可以通过设置bin参数选择您需要的bin
size大小，如bin20，bin50，bin100，bin200，bin500，默认将为您选择bin50。选择好表达矩阵文件和binsize大小后，点击提交，开始进行数据分析。

![](/logo.svg){width="5.75in" height="2.6875in"}

数据加载页面

2.2.5.1.3 **统计gef文件**

对gef文件counts，gene，线粒体gene比例等进行统计，该步骤预计30min（1\*1cm芯片，1G
reads）。分析完成后，可在任务结果页面查看该任务（QC开头的任务号），通过查看报告按钮，进入结果查看。也可下载分析结果数据。

![](/logo.svg){width="5.75in" height="2.71875in"}

QC分析页面

![](/logo.svg){width="5.75in" height="2.6666666666666665in"}

任务结果查看

2.2.5.1.4 **预处理**

根据初步的统计结果，对gef文件进行细胞过滤，基因过滤，归一化，高可变基因等预处理分析。该步骤预计15min（1\*1cm芯片，1G
reads）。分析完成后，可在任务结果页面查看该任务（PR开头的任务号），通过查看报告按钮，进入结果查看。也可下载分析结果数据。

注：预处理分析算法调用的stereopy工具算法。当同时使用Min genes 和
N_top_genes过滤时，容易把有效数据全部过滤，此时，系统会将两个参数定义为None。

![](/logo.svg){width="5.75in" height="2.4895833333333335in"}

预处理后的分析结果

2.2.5.1.5 **注释方法选择**

高级分析细胞注释支持分步注释和端到端注释。默认情况下，会为您选择分步注释。\
分步注释：首先，使用聚类算法（目前支持Leiden和Louvain）进行聚类，然后基于Marker基因或数据集自动或手动进行聚类标注。\
端到端注释：直接使用软件注释（目前支持SingleR）。

![](/logo.svg){width="5.75in" height="2.0625in"}

2.2.5.1.6 **分群**

预处理完成后，进行分群（cluster）和找marker基因分析。该步骤预计35min（1\*1cm芯片，1G
reads）。分析完成后，可在任务结果页面查看该任务（CL开头的任务号），通过查看报告按钮，进入结果查看。也可下载分析结果数据。

请注意：预处理完成之后，才可进行cluster和find marker分析

注：cluster和find marker分析算法调用的stereopy工具算法。

1）设置好cluster分析参数后，点击提交按钮进行分析。

![](/logo.svg){width="5.75in" height="2.5520833333333335in"}

cluster提交页面

2）任务提交之后，页面显示任务分析等待中。

![](/logo.svg){width="5.75in" height="2.4791666666666665in"}

cluster分析等待页面

3）分析完成后，可在任务结果页面查看该任务（CL开头的任务号），通过查看报告按钮，进入结果查看。可查看空间和UMAP可视化结果。

![](/logo.svg){width="5.75in" height="2.4895833333333335in"}

cluster分析结果空间可视化页面

![](/logo.svg){width="5.75in" height="2.6770833333333335in"}

cluster分析结果UMAP可视化页面

4）切换cluster，可查看不同cluster的全部marker
gene。表格支持搜索、排序和下载。

![](/logo.svg){width="5.75in" height="2.4166666666666665in"}

marker基因页面

5)通过数据集连接器，可查看在数据集中，marker
gene对应的细胞类型，供手动注释进行参考。

注：Stereominer搜集了人和小鼠物种不同组织的200+数据集，并人工审核和处理，详细可访问
https://www.stomics.tech/sap/stereominer/database/#/study/。

![](/logo.svg){width="5.75in" height="2.71875in"}

数据集页面

6)通过知识库映射器，可查看在知识库中，marker
gene对应的细胞类型，供手动注释进行参考。

注：知识库是Stereominer数据库人工搜集的如panglaodb，cellmarker，Cell
Taxonomy等数据库的内容，手动注释可参考。

![](/logo.svg){width="5.75in" height="2.6979166666666665in"}

7）查看marker基因表达热图。

![](/logo.svg){width="5.75in" height="2.6770833333333335in"}

marker基因表达热图

2.2.5.1.7 **自动注释**

通过聚类分析得到不同细胞类群后，除了使用每个cluster的Marker基因信息对细胞类群进行初步的注释和分析之外，还可通过其他软件将细胞类群与参考数据库进行比较，以得到分群后不同细胞的细胞类群注释信息。

SingleR
可以将细胞聚类结果中的每个cluster与参考数据库进行比较，根据该cluster与参考数据库中已知细胞类群基因表达谱的相似性对cluster进行打分，最终得到一个打分矩阵。通过打分矩阵结果即可将细胞聚类结果注释为不同的细胞类群。
该步骤预计60min（1\*1cm芯片，1G
reads）。分析完成后，可在任务结果页面查看该任务（AA开头的任务号），通过查看报告按钮，进入结果查看。也可下载分析结果数据。

也可跳过自动注释，分群完后直接进行手动注释的步骤。

![](/logo.svg){width="5.75in" height="2.75in"}

2.2.5.1.8 **手动注释**

手动注释可在分群注释或自动注释后。若自动注释后进行手动注释，系统会将自动注释的结果展示在手动注释的第一列，可通过点击编辑按钮，进行细胞类型的修改，完成注释。手动注释完，也可重新进行分群或自动注释。请注意，若重新进行自动注释，手动注释的结果会被重置。手动注释步骤预计20min（1\*1cm芯片，1G
reads）。

分析完成后，可在任务结果页面查看该任务（MA开头的任务号），通过查看报告按钮，进入结果查看。也可下载分析结果数据。

1）根据markergene和知识库dataset参考，手动对分群（cluster）进行细胞类型注释，编辑好不同cluster细胞类型后，点击提交按钮进行分析。

![](/logo.svg){width="5.75in" height="2.6979166666666665in"}

2）分析完成后，可在任务结果页面查看该任务（MA开头的任务号），通过查看报告按钮，进入结果查看。可查看空间和UMAP可视化结果。

![](/logo.svg){width="5.75in" height="2.59375in"}

4)查看不同分群的表达情况

![](/logo.svg){width="5.75in" height="2.5416666666666665in"}

2.2.5.1.9 **拟时序分析**

拟时序分析（pseudotime analysis）也称为细胞轨迹分析（trajectory
inference），是指根据不同细胞类群之间其基因差异表达的情况，获得细胞谱系的发育结果，构建细胞随着一个虚拟时间顺序的变化轨迹，以此重现细胞随时间变化而变化的过程。
基于细胞注释的结果，使用Monocle3
软件进行拟时序分析，根据软件推测的发育轨迹进行细胞类群的可视化。该步骤预计1h（1\*1cm芯片，1G
reads）。分析完成后，可在任务结果页面查看该任务（PT开头的任务号），通过查看报告按钮，进入结果查看。也可下载分析结果数据。

![](/logo.svg){width="5.75in" height="2.6145833333333335in"}

细胞发育轨迹图

根据细胞发育轨迹结果中的节点信息，结合不同细胞类群中基因表达量的变化，Monocle3可以通过机器学习算法计算处于最早发育阶段的细胞，实现拟时序分析。

![](/logo.svg){width="5.75in" height="2.65625in"}

在不同的细胞类群聚类结果中，选取Monocle3计算得到的Top5/Top10/Top15的Marker基因，按照已获得的拟时序结果进行基因表达量的拟时序作图。

![](/logo.svg){width="5.75in" height="2.5520833333333335in"}

2.2.5.1.10 **细胞互作分析**

细胞注释完成后，可居于注释的数据进行细胞互作分析，支持CellChat和Cellphonedb分析。

CellChat
是一个能够从单细胞数据中定量推断和分析细胞间通信网络的工具，利用网络分析和模式识别方法预测细胞的主要信号输入和输出，以及这些细胞和信号如何协调功能。CellChatDB数据库整合了来自KEGG和最近研究中的信号分析信息，该数据库囊括了已知的配体-受体复合物组成，包括配体-受体多聚体复合物以及几类辅酶因子。可使用CellChat工具来鉴定时空数据中的配体/受体关系和细胞间的通讯分子，研究不同细胞类型之间的相互交流及通讯网络。

CellPhoneDB是一个受配体及其相互作用的数据库，有别于其他数据库的是CellPhoneDB考虑了受配体的亚单位结构，准确的表达了异聚体复合物。

该步骤预计3h（1\*1cm芯片，1G
reads）。分析完成后，可在任务结果页面查看该任务（IN开头的任务号），通过查看报告按钮，进入结果查看。也可下载分析结果数据。

![](/logo.svg){width="5.75in" height="2.6875in"}

2.2.5.1.11 **功能富集**

细胞注释完成后，可基于注释的数据进行功能富集分析，使用clusterProfiler
软件分别对每一个细胞类群的差异基因进行GO（Gene Ontology）和KEGG（Kyoto
Encyclopedia of Genes and
Genomes）功能富集分析。该步骤预计0.5h（1\*1cm芯片，1G reads）

![](/logo.svg){width="5.75in" height="2.5729166666666665in"}

GO富集分析结果图

横轴为富集基因占比，纵轴为富集到的GOterm，颜色对应P-value的值，越红表示富集效果越显著。

![](/logo.svg){width="5.75in" height="2.59375in"}

KEGG富集分析结果图

横轴为富集基因占比，纵轴为富集到的KEGGPathway，颜色对应P-value的值，越红表示富集效果越显著。

![](/logo.svg){width="5.75in" height="2.7395833333333335in"}

GO富集分析网络连接图

圆点为富集到的GOterm，圆点大小表示基因数，圆点颜色表示P-value的值，越红表示富集效果越显著；连接线的粗细表示两个GOterms之间共有的基
因数。

![](/logo.svg){width="5.75in" height="2.6458333333333335in"}

KEGG富集分析网络连接图

圆点为富集到的KEGGPathway，圆点大小表示基因数，圆点颜色表示P-value的值，越红表示富集效果越显著；连接线的粗细表示两个GOterms之间共
有的基因数

2.2.5.1.12 **分析参数说明**

+-------------------+-------------------------+--------+--------------+
| 参数名称          | 说明                    | 参数   | 参数范围     |
|                   |                         | 默认值 |              |
+-------------------+-------------------------+--------+--------------+
|                   | \*                      |        |              |
|                   | \***preprocessing**\*\* |        |              |
+-------------------+-------------------------+--------+--------------+
| Min genes         | Minimum number of total | 200    | \[0,500\]    |
|                   | counts expressed        |        |              |
|                   | required for a cell to  |        |              |
|                   | pass filtering.         |        |              |
+-------------------+-------------------------+--------+--------------+
| Min_              | Minimum number of genes | 3      | \[1,100\]    |
| n_genes_by_counts | expressed in the count  |        |              |
|                   | matrix.                 |        |              |
+-------------------+-------------------------+--------+--------------+
| Max_              | Maximum number of genes | 2500   | \[100,inf)   |
| n_genes_by_counts | expressed in the count  |        |              |
|                   | matrix.                 |        |              |
+-------------------+-------------------------+--------+--------------+
| Max percent mito  | Maximum percentage of   | 5      | \[1,100\]    |
|                   | counts in mitochondrial |        |              |
|                   | genes.                  |        |              |
+-------------------+-------------------------+--------+--------------+
| Min cells         | Minimum number of cells | 3      | \[1, 100\]   |
|                   | expressed required for  |        |              |
|                   | a gene to pass          |        |              |
|                   | filtering.              |        |              |
+-------------------+-------------------------+--------+--------------+
| Max cells         | Maximum number of cells | 10000  | \[100, inf)  |
|                   | expressed required for  |        |              |
|                   | a gene to pass          |        |              |
|                   | filtering.              |        |              |
+-------------------+-------------------------+--------+--------------+
| Normalization     | Method to normalize the | log +  | \[log +      |
|                   | count matrix.           | scale  | scale,       |
|                   |                         |        | scTrans      |
|                   |                         |        | form,zscore, |
|                   |                         |        | quantile\]   |
+-------------------+-------------------------+--------+--------------+
| N_top_genes       | Number of               | 2000   | \[1000,      |
|                   | highly-variable genes   |        | 20000\]      |
|                   | to keep.                |        |              |
+-------------------+-------------------------+--------+--------------+
|                   | \*\***Clustering**\*\*  |        |              |
+-------------------+-------------------------+--------+--------------+
| Feature Selection | The method to choose a  | All    | \[All genes, |
|                   | subset of genes used    | genes  | High         |
|                   | for the following       |        | variable     |
|                   | analysis.               |        | genes\]      |
+-------------------+-------------------------+--------+--------------+
| Pcs number        | Number of principal     | 50     | \[2, 100\]   |
|                   | components to compute.  |        |              |
+-------------------+-------------------------+--------+--------------+
| Dimensional       | Method to implement     | UMAP   | \[UMAP,      |
| reduction         | dimension reduction.    |        | tSNE\]       |
+-------------------+-------------------------+--------+--------------+
| Use pcs number    | Number of PCs from pca  | 50     | \[2,100\]    |
|                   | to be used for          |        |              |
|                   | dimension reduction.    |        |              |
+-------------------+-------------------------+--------+--------------+
| Neighborhood size | The size of local       | 15     | \[2,100\]    |
|                   | neighborhood (in terms  |        |              |
|                   | of number of            |        |              |
|                   | neighboring data        |        |              |
|                   | points) used for        |        |              |
|                   | manifold approximation. |        |              |
|                   | Larger values result in |        |              |
|                   | more global views of    |        |              |
|                   | the manifold, while     |        |              |
|                   | smaller values result   |        |              |
|                   | in more local data      |        |              |
|                   | being preserved.        |        |              |
+-------------------+-------------------------+--------+--------------+
| Clustering method | Method to implement     | leiden | \[leiden,    |
|                   | cell clustering.        |        | louvain\]    |
+-------------------+-------------------------+--------+--------------+
| Resolution        | Value controlling the   | 1      | (0, inf)     |
|                   | coarseness of the       |        |              |
|                   | clustering.Higher       |        |              |
|                   | values lead to more     |        |              |
|                   | clusters.               |        |              |
+-------------------+-------------------------+--------+--------------+
|                   | **\*\*Auto              |        |              |
|                   | annotation\*\***        |        |              |
+-------------------+-------------------------+--------+--------------+
| Method            | The analysis software   | S      | \[SingleR\]  |
|                   | automatically annotates | ingleR |              |
|                   | clusters or each        |        |              |
|                   | bin_id, and output cell |        |              |
|                   | type.                   |        |              |
+-------------------+-------------------------+--------+--------------+
| Reference         | Seven reference         | B      | \[Blueprin   |
|                   | datasets for automatic  | luepri | tEncodeData, |
|                   | annotation. The data    | ntEnco |              |
|                   | comes from SingleR\'s   | deData | DatabaseI    |
|                   | built-in database.      |        | mmuneCellExp |
|                   |                         |        | ressionData, |
|                   |                         |        |              |
|                   |                         |        | Hu           |
|                   |                         |        | manPrimaryCe |
|                   |                         |        | llAtlasData, |
|                   |                         |        |              |
|                   |                         |        | ImmGenData,  |
|                   |                         |        |              |
|                   |                         |        | Monac        |
|                   |                         |        | oImmuneData, |
|                   |                         |        |              |
|                   |                         |        | Mous         |
|                   |                         |        | eRNAseqData, |
|                   |                         |        |              |
|                   |                         |        | Novers       |
|                   |                         |        | hternHematop |
|                   |                         |        | oieticData\] |
+-------------------+-------------------------+--------+--------------+
| Use genes         | specify the feature     | de     | \            |
|                   | selection method to be  |        | [de,sd,all\] |
|                   | used.                   |        |              |
|                   |                         |        |              |
|                   | de:genes that are       |        |              |
|                   | differentially          |        |              |
|                   | expressed between       |        |              |
|                   | labels\                 |        |              |
|                   | sd:genes that are       |        |              |
|                   | highly variable across  |        |              |
|                   | labels                  |        |              |
|                   |                         |        |              |
|                   | all:not perform any     |        |              |
|                   | feature selection       |        |              |
+-------------------+-------------------------+--------+--------------+
| De.method         | specify the method of   | c      | \[classi     |
|                   | DE genes detected       | lassic | c,wilcox,t\] |
|                   | between pairs of        |        |              |
|                   | labels.                 |        |              |
|                   |                         |        |              |
|                   | classic:log-fold        |        |              |
|                   | changes ranked          |        |              |
|                   |                         |        |              |
|                   | wilcox:Wilcoxon ranked  |        |              |
|                   | sum test                |        |              |
|                   |                         |        |              |
|                   | t:Welch t-test          |        |              |
+-------------------+-------------------------+--------+--------------+
|                   | **\*\*Pseudotime        |        |              |
|                   | analysis\*\***          |        |              |
+-------------------+-------------------------+--------+--------------+
| Tools             | The analysis software   | mo     | \[monocle3\] |
|                   | for pseudotime          | nocle3 |              |
|                   | analysis.               |        |              |
+-------------------+-------------------------+--------+--------------+
|                   | **\*\*Interaction       |        |              |
|                   | analysis\*\***          |        |              |
+-------------------+-------------------------+--------+--------------+
| Interaction tool  | The analysis software   | Ce     | \[CellChat,C |
|                   | for cell interaction    | llChat | ellphonedb\] |
|                   | analysis.               |        |              |
+-------------------+-------------------------+--------+--------------+
| Reference         | Reference species.      | Human  | \[H          |
|                   |                         |        | uman,Mouse\] |
+-------------------+-------------------------+--------+--------------+
|                   | **\*\*Functional        |        |              |
|                   | Enrichment\*\***        |        |              |
+-------------------+-------------------------+--------+--------------+
| Tool              | The analysis software   | clu    | \[clust      |
|                   | for functional          | sterPr | erProfiler\] |
|                   | enrichment analysis.    | ofiler |              |
+-------------------+-------------------------+--------+--------------+
| Reference         | Reference species.      | Human  | \[H          |
|                   |                         |        | uman,Mouse\] |
+-------------------+-------------------------+--------+--------------+
| p                 | The p value is used to  | 0.001  | \[0.001      |
|                   | select significantly    |        | ,0.01,0.05\] |
|                   | differentially          |        |              |
|                   | expressed genes and     |        |              |
|                   | adjust the pvalue       |        |              |
|                   | cutoff on enrichment    |        |              |
|                   | analysis                |        |              |
+-------------------+-------------------------+--------+--------------+

2.2.5.1.13 **交付报告生成**

1.语言可选，当前仅支持中文。

2.可自选报告模块，对应报告目录下"分析结果" -\> "4
数据分析"的各个子模块。默认全选。

3.支持选择生成报告所需的任务数据，系统会根据跳转时的当前任务，自动填充具有前后关联性的任务数据，同级任务需手动选择。若切换上级任务，下级任务的下拉列表也会自动过滤。

4.报告支持下载（.html文件）和打印。

![](/logo.svg){width="5.75in" height="2.4479166666666665in"}

2.2.6 **数据分析**

2.2.6.1 **数据分析**

在STOmics Cloud进行SAW标准分析后，可进行下游的数据分析。STOmics
Cloud数据分析基于开源的Jupyter分析框架二次开发，交互式操作，支撑数据分析、建模检验、中间和结果数据可视化。

2.2.6.1.1 **在线分析**

2.2.6.1.1.1 **新建notebook**

登录STOmics
Cloud，进入项目，进入分析模块后，可点击新建notebook按钮，创建notebook。

![](/logo.svg){width="5.75in" height="2.5104166666666665in"}

新建notebook页面

2.2.6.1.1.2 **查看notebook**

登录STOmics Cloud，进入项目，进入分析模块后，可查看已创建的notebook。

![](/logo.svg){width="5.75in" height="2.5104166666666665in"}

notebook查看页面

2.2.6.1.1.3 **运行notebook**

1.运行notebook

选择其中一个notebook文件，点击右上角按钮运行。系统将默认选择2核8G计算资源和默认的时空分析镜像。若是已运行过notebook，系统将默认使用最近一次选择的资源配置，快速启动。

![](/logo.svg){width="5.75in" height="2.5208333333333335in"}

Notebook查看页面

2.重新配置资源运行notebook

用户可根据分析的需要，配置Notebook分析的计算资源，存储资源和镜像资源。

1）通过重置资源运行按钮，进入资源配置页面

2）在资源配置页面，设置计算资源，STOmics
Cloud提供5种资源类型，包括写代码，通用型，内存型，计算型，大数据型。最大可选择96核320GB的计算资源。存储资源，STOmics
Cloud为每个项目的每个用户提供最大100GB的存储资源。镜像资源可选择自定义的镜像，也可选择从公共库添加到个人镜像库的镜像。

![](/logo.svg){width="5.75in" height="3.4791666666666665in"}

资源配置页面

![](/logo.svg){width="5.75in" height="2.1041666666666665in"}

正在启动notebook页面

3.关闭notebook或延长notebook运行时间

notebook运行时，若需停止正在运行的notebook，可点击停止按钮，终止notebook。notebook运行时间默认8h，若任务还没有运行完成，可点击延时按钮，延长notebook运行时间。

同时支持在notebook运行启动后，在notebook运行页面进行容器关闭和延时操作。

![](/logo.svg){width="5.75in" height="2.5625in"}

notebook停止或延时

![](/logo.svg){width="5.75in" height="2.78125in"}

4.notebook菜单栏介绍

Cell 是 Notebook
内容的最小单元，可以编辑代码（Coed）和文本（Markdown）。Notebook菜单栏涵盖了笔记本的所有功能，即便是工具栏的功能，也都可以在菜单栏的类目里找到。然而，并不是所有功能都是常用的，比如Widgets，Navigate。Kernel类目的使用，主要是对内核的操作，比如中断、重启、连接、关闭、切换内核等，由于我们在创建笔记本时已经选择了内核，因此切换内核的操作便于我们在使用笔记本时切换到我们想要的内核环境中去。

![](/logo.svg){width="5.75in" height="1.6875in"}

notebook功能组件说明

2.2.6.1.1.4 **notebook数据挂载**

为用户能够根据分析的需求，挂载Notebook
input数据，提供自定义挂载数据功能。若用户未进行挂载数据，系统将默认挂载项目的前1000个任务的结果数据到Notebook
input目录中。包括STOmics Cloud
SAW，高级分析等各类分析结果文件，项目组成员具备可读权限，可在input目录查看已挂载的文件，直接用于分析。文件夹的层级关系/input/项目编号/芯片编号/任务编号/文件。数据文件类型包含gef，gem，cluster.h5ad文件等。若店家"数据挂载"按钮进行挂载数据，可选择所需要的分析结果挂载。

挂载步骤：

1）通过Notebook详情页，点击挂载数据按钮，进入数据选择页面

2）进入数据选择页面后，勾选任务，点击挂载数据，系统将挂载已选择的任务的结果数据到Notebook
input目录中。也可通过点击table右上角的"选择前1000条"按钮，快速挂载前1000个任务结果，若任务不到1000个，将默认挂载所有任务结果。数据挂载后，容器中input目录挂载数据，将挂载本次选择的数据，input目录之前挂载的数据将会被更新

3）挂载后，系统将快速启动容器，可在Notebook input目录查看挂载的数据。

![](/logo.svg){width="5.75in" height="2.5520833333333335in"}

Notebook挂载数据入口

![](/logo.svg){width="5.75in" height="2.4166666666666665in"}

数据选择页面

![](/logo.svg){width="5.75in" height="2.7291666666666665in"}

查看挂载数据

![](/logo.svg){width="5.75in" height="3.9375in"}

input文件详情示例

用户也可根据分析的需求，修改挂载到Notebook
input目录的数据，进行分析。可在容器启动页面，点击修改挂载数据的按钮，进行数据的重新挂载。

![](/logo.svg){width="5.75in" height="2.6875in"}

2.2.6.1.1.5 **Notebook克隆**

为能在其他项目中快速复用Notebook代码，STOmics
Cloud支持Notebook克隆到目标项目中。

Step 1：选择想要克隆的notebook，点击克隆按钮，弹窗克隆确认框

2.填写notebook名称，选择需要克隆的目标项目，点击确认，Notebook将被克隆到目标项目中，可在目标项目中应用notebook进行分析。

![](/logo.svg){width="5.75in" height="2.59375in"}

![](/logo.svg){width="5.75in" height="2.5416666666666665in"}

2.2.6.1.1.6 **Notebook发布**

为让更多优秀的Notebook代码，能够服务更多的用户，STOmics
Cloud提供Notebook发布到公共库的功能，其他项目可将公共库的Notebook添加到自己的项目中，进行分析。

1）选择优秀的Notebook代码，点击发布按钮，确认发布。

2）Notebook发布之后，可在公共库查看和搜索已发布的Notebook，用户自己发布的Notebook，也可通过撤销功能，撤销发布。若是Notebook代码有更新，也可更新发布到公共库。

3）STOmics
Cloud平台用户，可通过Notebook公共库，将Notebook，添加到自己的项目中，进行分析。

![](/logo.svg){width="5.75in" height="2.46875in"}

发布Notebook

![](/logo.svg){width="5.75in" height="2.5729166666666665in"}

已发布到公共库Notebook

![](/logo.svg){width="5.75in" height="2.6041666666666665in"}

撤销和更新发布

![](/logo.svg){width="5.75in" height="2.5625in"}

公共库Notebook添加到目标项目

2.2.6.1.1.7 **Notebook权限**

Notebook根据不同的用户角色，设置了不同的功能权限。

1）Notebook分析功能，目前仅bgier用户登录，可进入分析。

2）Notebook发布功能，自定义镜像功能，镜像发布功能，仅开发者具有功能权限，如用户需要该功能，可联系
stereo@genomics.cn或chenfengzhen@genomics.cn 邮箱开通权限。

3）Notebook启动后，用户可在Work目录进行工作，系统默认为用户挂载了input目录（可读权限），可利用input目录的文件进行分析，同时挂载了项目内其他users的目录（可读权限），可利用其他users目录里的代码或文件进行分析，但无权限在users目录写入。task目录，为用户离线分析结果存储的目录，离线分析的notebook结果文件将存储在该目录。temp目录为用户临时存储中间结果的目录，容器关闭后，该目录下的文件会被销毁。

Notebook功能权限列表如下：

![](/logo.svg){width="5.75in" height="11.020833333333334in"}

2.2.6.1.1.8 **notebook分析案例**

系统为每个项目默认配置了stereopy和seruat时空分析工具的案例。案例文件夹路径/work/notebook，启动容器后，可在notebook目录下查看和编辑运行分析案例。

注意：案例中datapath需根据分析需求，设置所需要的数据路径进行分析。

![](/logo.svg){width="5.75in" height="2.78125in"}

Stereopy和Seruat分析案例

![](/logo.svg){width="5.75in" height="2.4583333333333335in"}

Stereopy 读取gef文件

2.2.6.1.1.9 **分析视频**

StereoNote完整操作视频如下

**\[项目管理 (4).mp4\]**

2.2.6.1.2 **离线分析**

2.2.6.1.2.1 **新建离线分析任务**

进入notebook查看页面后，点击离线分析按钮，进入离线分析任务创建。

![](/logo.svg){width="5.75in" height="2.6875in"}

2.2.6.1.2.1.1 **notebook离线任务创建**

1）第一步，在线创建一个notebook

![](/logo.svg){width="5.75in" height="2.0833333333333335in"}

2）第二步，选择创建好的notebook文件

![](/logo.svg){width="5.75in" height="2.4375in"}

![](/logo.svg){width="5.75in" height="2.90625in"}

3）第三步，参数配置

系统支持三种参数配置。

a.无参数，默认用notebook里面的参数和脚本投递。

![](/logo.svg){width="5.75in" height="2.5520833333333335in"}

b.添加参数，通过页面添加参数组

可添加多组参数，进行任务的批量投递。系统会将每组参数分别起一个容器，进行批量投递，提升分析效率。如下方式将形成2个任务进行批量投递。

![](/logo.svg){width="5.75in" height="2.75in"}

c.参数文件配置

也可通过excel，或json文件设置参数，批量任务投递。

![](/logo.svg){width="5.75in" height="2.7708333333333335in"}

![](/logo.svg){width="5.75in" height="2.4270833333333335in"}

![](/logo.svg){width="4.604166666666667in" height="3.9375in"}

4）第四步，资源配置

选择任务运行所需要的计算资源和镜像资源

![](/logo.svg){width="5.75in" height="3.4583333333333335in"}

![](/logo.svg){width="5.75in" height="3.1354166666666665in"}

5）第五步，运行离线任务

![](/logo.svg){width="5.75in" height="2.9166666666666665in"}

6）第六步，查看离线分析任务结果

从项目任务入口进入，数据分析，离线任务。点击任务编号，查看批量任务的子任务列表。

![](/logo.svg){width="5.75in" height="2.6875in"}

![](/logo.svg){width="5.75in" height="2.4375in"}

点击子任务编号，进入任务详情页面，查看任务结果，任务日志和资源详情

![](/logo.svg){width="5.75in" height="2.7604166666666665in"}

![](/logo.svg){width="5.75in" height="2.65625in"}

![](/logo.svg){width="5.75in" height="2.9166666666666665in"}

2.2.6.1.2.1.2 **运行脚本离线任务创建**

1）第一步，在线创建一个运行脚本

![](/logo.svg){width="5.75in" height="2.65625in"}

2)第二步，添加脚本

点击运行脚本，在shell输入框，输入需要运行的脚本，脚本路径可通过在线notebook，copy
path添加。若需批量投递，可输入多条指令。

![](/logo.svg){width="5.75in" height="2.40625in"}

![](/logo.svg){width="5.75in" height="2.4375in"}

![](/logo.svg){width="5.75in" height="2.6875in"}

3）第三步，资源配置

![](/logo.svg){width="5.75in" height="2.5520833333333335in"}

4）第四步，运行投递

![](/logo.svg){width="5.75in" height="2.5833333333333335in"}

5）第五步，查看离线任务

![](/logo.svg){width="5.75in" height="2.4166666666666665in"}

2.2.7 **项目任务**

展示当前项目所有芯片的任务，分流程分析和数据分析模块展示，点击可切换列表。

2.2.7.1 **流程分析**

展示当前项目所有的任务列表（包括SAW和高级分析的所有任务），默认卡片展示方式，可切换列表模式；

1.搜索，模糊查询当前页面数据；

2.任务卡片：

1）所有任务不分层级展示，全部平级展示，无缩略图的给个默认的；

2）子任务展示上一级主任务编号；

3）运行中状态时，移入鼠标展示详细的步骤名称；

3.点击切换布局，进入list展示页面；

4.操作栏

1）点击icon进入对应功能页面，点击【更多】icon，显示收起的操作按钮；

用户可通过点击删除按钮进行任务及数据的删除。

![](/logo.svg){width="5.75in" height="2.4895833333333335in"}

![](/logo.svg){width="5.75in" height="2.5729166666666665in"}

4.项目芯片-列表展示

1）搜索：支持列字段组合查询；

2）列设置：支持列显示字段设置

![](/logo.svg){width="5.75in" height="2.5in"}

2.2.7.2 **数据分析**

进入项目后，可在项目的任务管理模块，查看分析的任务，包括任务使用的计算和镜像资源，已用时长和剩余时长等，也可在该模块进行任务的关闭和延时操作。

![](/logo.svg){width="5.75in" height="2.7916666666666665in"}

2.2.8 **项目设置**

该页面包括项目信息，项目成员2个模块。

> 2.2.8.1 **项目信息**

点击项目信息，进入项目信息页面，项目信息页面展示项目编号、项目名称、项目简介、项目负责人(姓名，电话和邮箱)、项目订单和项目合同。项目订单栏中包含订单编号、样本名称、订单审核状态、下单时间、用户购买的科技服务产品、型号、数量、和预估费用。项目合同栏中提供合同编号、合同名称、电子版合同预览和下载链接。

用户可从 "项目管理"-\> "项目信息"页点击
"项目成员"，进入项目成员管理页面。该页面展示项目成员的用户名、邮箱、和角色权限。本页面功能除展示成员信息外，还包括添加成员、编辑权限和退出项目的功能。

2.2.8.2 **项目成员**

2.2.8.3 **默认用户角色权限**

项目中的成员可以拥有不同的用户角色，角色对应不同的数据分析和信息数据查阅权限。默认用户角色有四种，其权限等级由高至低依次为：项目负责人、项目管理员、分析人员、和访客。项目负责人为项目中必要角色，角色数量不设限制。默认用户角色与权限对应关系表可从"项目成员"栏右上角点击"编辑权限"进入。

2.2.8.4 **添加成员**

项目负责人和项目管理员可以为项目添加成员。项目负责人和项目管理员的项目成员管理页面与分析人员和访客有所不同。

![](/logo.svg){width="5.75in" height="3.2291666666666665in"}

项目负责人和项目管理员可点击"项目成员"栏右上角的"添加成员"，在文字框中输入成员用户名、用户角色后点击提交完成添加。

![](/logo.svg){width="5.75in" height="2.4375in"}

> 2.2.8.5 **修改成员用户角色**

项目负责人和项目管理员可在项目成员管理页面修改成员用户角色。点击"用户角色"栏的下拉选框，选择新的角色名称，点击"提交"确认修改"。

修改成员用户角改成员用户角色

2.2 **数据管理**

点击数据管理入口进入项目数据页面。

2.2.1 **项目文件夹**

1.按项目维度展示所有项目数据文件夹，默认按立项日期倒序；

2.搜索：支持项目名称搜索；

3.点击项目名称进入项目文件夹详情。

![](/logo.svg){width="5.75in" height="2.4479166666666665in"}

2.2.2 **芯片&样本文件夹**

1.展示当前项目的所有芯片文件夹和样本sample image文件夹，按更新时间倒序；

2.支持在当前页面新建文件夹和批量上传FASTQ数据；

3.支持用户删除新建的文件夹和上传的数据；

![](/logo.svg){width="5.75in" height="2.5729166666666665in"}

![](/logo.svg){width="5.75in" height="2.5625in"}

3.批量上传FASTQ

1）第1步，点击模板下载；

2）第2步，点击上传，上传数据；

3）可以点击【上传记录】查看当前用户fq的上传记录。

![](/logo.svg){width="5.75in" height="2.6354166666666665in"}

![](/logo.svg){width="5.75in" height="2.5833333333333335in"}

2.2.3 **芯片文件夹详情**

1.展示当前芯片的RAW_DATA文件夹、RESULT_DATA文件夹和用户在当前页新建的文件夹，按更新时间倒序；

支持用户删除新建的文件夹和上传的数据；

![](/logo.svg){width="5.75in" height="2.1666666666666665in"}

2.支持在当前页面上传数据

1）上传数据类型包括：FASTQ数据、IPR、GEF和其它文件；

![](/logo.svg){width="5.75in" height="2.5in"}

2）上传FASTQ数据，分PE和SE两种测序数据类型；

![](/logo.svg){width="5.75in" height="2.6145833333333335in"}

![](/logo.svg){width="5.75in" height="2.6458333333333335in"}

![](/logo.svg){width="5.75in" height="2.6041666666666665in"}

3）上传IPR文件

![](/logo.svg){width="5.75in" height="2.9791666666666665in"}

4)上传GEF或其它文件

![](/logo.svg){width="5.75in" height="2.5520833333333335in"}

3.在芯片文件夹下面上传的FASTQ数据均默认保存在RAW_DATA文件夹，上传的其它数据均保存在上传当前列表页。

2.2.4 **样本图像文件夹详情**

1.展示当前样本所有的图片列表，默认按更新时间倒序；

2.支持按文件名称查询；

![](/logo.svg){width="5.75in" height="1.7083333333333333in"}

2.2.5 **新建文件夹详情**

1.展示当前文件夹所有的文件夹和文件列表；

2.支持按文件名称搜索当前页面数据；

3.3.支持用户删除新建的文件夹和上传的数据；

![](/logo.svg){width="5.75in" height="1.8125in"}

3.上传数据

1）芯片文件夹下的新建文件夹：

支持在当前文件夹下上传FASTQ数据（remote模式)、IPR、GEF和其它文件，FASTQ和IPR直接网页上传，GEF和其它文件上传均会启动镭速；

2）非芯片文件夹下的新建文件夹：

仅支持在当前文件夹下上传"其它文件"，上传启动镭速；

2.2.6 **RAW_DATA文件夹详情**

1.展示当前文件夹所有的文件列表，包括FASTQ数据、mask数据和imageQC输出的数据（tif、ipr、json和tar.gz)；

2.支持按文件名称搜索当前页面数据；

![](/logo.svg){width="5.75in" height="2.5416666666666665in"}

3.当前页面仅支持上传FASTQ数据

![](/logo.svg){width="5.75in" height="2.6770833333333335in"}

2.2.7 **RESULT_DATA文件夹详情**

1.展示图像预处理、SAW、高级分析的所有任务列表，平级展示，如果非主任务则展示上一级主任务ID，按更新时间倒序；

![](/logo.svg){width="5.75in" height="1.7395833333333333in"}

2.2.8 **任务ID文件夹详情**

1.展示当前任务ID所有的数据列表，按更新时间倒序；

2.支持按列字段组合查询当前页数据；

![](/logo.svg){width="5.75in" height="2.4791666666666665in"}

**2.3.9 回收站**

1.分4个类别展示回收站的FASTQ数据、图像数据、任务数据和其它数据（用户新建文件夹及上传的数据）

2.用户可以恢复回收站的数据，也可以彻底删除，彻底删除后数据无法恢复；

![](/logo.svg){width="5.75in" height="1.6354166666666667in"}

2.3 **任务管理**

2.3.1 **流程分析**

1.展示当前账号所有项目的任务列表，默认卡片式展示，可切换成list;

2.搜索，支持当前页数据查询；

3.卡片说明：其余逻辑同【项目任务】页，新增"项目名称"字段；

4.任务管理-list，略；

![](/logo.svg){width="5.75in" height="2.53125in"}

2.3.2 **数据分析**

展示notebook分析任务。可通过点击关闭按钮，关闭正在运行的容器。也可通过延时按钮，对正在运行的容器进行延时。

![](/logo.svg){width="5.75in" height="2.5833333333333335in"}

2.4 **可视化**

2.4.1 **访问**

2.4.1.1 **获取示例数据**

本软件提供可供宾客访问的示例数据，通过登陆[[官网页面](https://www.stomics.tech/):https://www.stomics.tech/]{.underline}
-\> 支持 -\> Demo数据 -\> Stereomap 访问。

![](/logo.svg){width="5.75in" height="2.59375in"}

图 2.5.1.1 - 1 官网首页

![](/logo.svg){width="5.75in" height="2.59375in"}

图 2.5.1.1 - 2 官网支持页

2.4.1.2 **项目数据**

本系统提供可供用户访问的项目数据。通过STOmics
Cloud系统：[https://www.stomics.tech/sap/]{.underline} -\>项目管理
任意点击一个芯片号即可访问该芯片号相关任务列表。在任务列表中选择"任务状态"为"完成"的任务号即可访问数据，以Example
data为例如下图2.5.1.2 - 1。

![](/logo.svg){width="5.75in" height="2.6979166666666665in"}

图 2.5.1.2 - 1 项目数据

![](/logo.svg){width="5.75in" height="2.6979166666666665in"}

图 2.5.1.2 - 2 任务列表

2.4.2 **可视化主页面**

页面布局和功能：

1.  系统参数区：从左至右依次分别为：分辨率、图像中心位置坐标、当前鼠标位置在图像坐标。

```{=html}
<!-- -->
```
2.  菜单栏区：Gene Table列表、图层名称列表、bin size列表、手动工具、
    cell bin聚类列表。

```{=html}
<!-- -->
```
3.  工具区：缩放进度条、图像操作（存储，读取，导出）。

```{=html}
<!-- -->
```
4.  主图区（主画布操作区）：可视化基因表达空间分布以及对画布的操作。

```{=html}
<!-- -->
```
5.  图例区：展示基因/蛋白图例、聚类图例。

![](/logo.svg){width="5.75in" height="2.6979166666666665in"}

图 2.5.2 - 1 可视化分区

![](/logo.svg){width="5.75in" height="2.6979166666666665in"}

图 2.5.2 - 2 可视化大致分布

2.4.2.1 **系统参数**

Resolution：图像分辨率。

Center：图像中心坐标点。

Mouse position：鼠标在图像上的位置。

2.4.2.2 **菜单栏区**

菜单栏从左至右依次介绍。

![](/logo.svg){width="2.1354166666666665in"
height="0.3333333333333333in"}

-   Gene/Protein：点击按钮即可展开Gene/Protein
    Table，二次点击为收起Gene/Protein Table。

![](/logo.svg){width="1.3020833333333333in" height="0.3125in"}

-   图层选择：点击按钮即可展开图层下拉列表，二次点击为收起图层列表。图层选择列表展示所有可能的图像包含：Image图层（ssDNA/DAPI，CcellMask，TtissueMask）、IF蛋白图层、主分析图层（基因热图/蛋白表达图层，cell聚类图层）、UMAP图像，以及对系统组件进行控制。

![](/logo.svg){width="1.5625in" height="0.4270833333333333in"}

-   binsize：展示当前芯片号的所有binsize，包括bin1、bin10、bin20、bin50、bin100、bin200、bin500以及cellbin（若该芯片号有cellbin数据则包含，否则侧不包含）。

![](/logo.svg){width="0.3333333333333333in"
height="0.3333333333333333in"}

-   设置按钮：包含图层附件工具的设置。

![](/logo.svg){width="0.3333333333333333in"
height="0.3020833333333333in"}

-   撤回按钮：点击按钮可撤回到上一步操作，最多支持10步。

![](/logo.svg){width="0.34375in" height="0.25in"}

-   重置刷新按钮：点击按钮可重置所有操作，恢复到初始状态。

![](/logo.svg){width="0.3541666666666667in"
height="0.2916666666666667in"}

-   游标按钮：点击即可退出手动工具模式。

![](/logo.svg){width="0.375in" height="0.34375in"}

-   手动配准按钮：点击即可进入手动配准模式，再次点击退出手动配准模式。

\*手动配准工具教程详见章节2.5.3.5。

![](/logo.svg){width="0.34375in" height="0.3020833333333333in"}

-   套索按钮：点击即可进入套索模式，再次点击退出套索模式。

\*套索工具教程详见章节2.5.3.6。

![](/logo.svg){width="0.3645833333333333in" height="0.3125in"}

-   过滤按钮：开发中。

![](/logo.svg){width="0.34375in" height="0.3333333333333333in"}

-   标注按钮：开发中。

![](/logo.svg){width="0.3541666666666667in"
height="0.3020833333333333in"}

-   配准模板按钮：点击即可打开配准模板。

\*配准模板工具教程详见章节2.5.3.7。

![](/logo.svg){width="1.5104166666666667in"
height="0.3229166666666667in"}

-   聚类列表：展示聚类分析结果的列表。

2.4.2.2.1 **Gene/Protein 列表**

展示当前数据的基因/蛋白表达量列表。（点击上方菜单栏中的（Gene
Table）下拉菜单即可打开Gene/Protein Table 控制面板）。

![](/logo.svg){width="5.75in" height="2.6979166666666665in"}

图 2.5.2.2.1 - 1 Gene/Protein Table控制面板

-   表头："Gene"为基因名称、"MIDCount"为该基因的MID数、"E10"为基因的空间富集程度（E10）打分。

```{=html}
<!-- -->
```
-   排序：单击表头右侧小箭头对表格进行升序或降序排列，默认按MID数降序进行排列。

```{=html}
<!-- -->
```
-   筛选：在"Please enter GeneID..."(Please enter
    ProteinID...)处输入基因/蛋白名称，可以在表格中对基因进行搜索（不区分大小写，支持模糊、多名称搜索：使用英文逗号隔开）。

```{=html}
<!-- -->
```
-   选择基因/蛋白：勾选复选框（基因名称前方的方框），会出现"Selected"分组，可选择使用Heatmap/multi-colored两种形式展示所选基因的表达丰度分布。教程详见章节2.5.3.3。

```{=html}
<!-- -->
```
-   分页：点击上一页、下一页按钮进行翻页，在页码位置中输入数字按下回车即可跳转该页。

```{=html}
<!-- -->
```
-   重置：点击"RESET"按钮重置到初始状态，恢复默认排序，清空已勾选项。

```{=html}
<!-- -->
```
-   关闭：再次点击Gene/Protein 即可收起左侧Gene/Protein Table控制面板。

```{=html}
<!-- -->
```
-   基因/蛋白merge图调色板

基因/蛋白merge图调色板包含以下五个参数：Opacity、Normalized、Brightness、Contrast、拾色器。如图2.5.2.2.1 -
2为基因/蛋白merge图调色板。教程详见章节2.5.3.3。

-   Opacity滑块：滑动滑块调整热图区域中的散点透明度。

```{=html}
<!-- -->
```
-   Normalization滑块区：对底图图像数据进行归一化，左右滑动或输入数值可调整其最大最小值。归一化公式：

![](/logo.svg){width="2.6770833333333335in"
height="0.6979166666666666in"}

-   Brightness滑块：滑动滑块或输入数值调节基因/蛋白图层的亮度。

```{=html}
<!-- -->
```
-   Contrast滑块：滑动滑块或输入数值调节基因/蛋白图层的对比度。

```{=html}
<!-- -->
```
-   拾色器：展示该基因/蛋白图层颜色。拖动拾色器上的小圆圈或拖动彩虹带即可修改颜色，支持手动输入颜色代码。

\*点击常用颜色中的颜色也可更改颜色。

![](/logo.svg){width="2.3125in" height="4.385416666666667in"}

图2.5.2.2.1 -2基因/蛋白图层调色板

2.4.2.2.2 **图层选择**

-   图层名称前的勾选框：通过勾选/反勾选来展示/隐藏图像。

```{=html}
<!-- -->
```
-   点击图层名称或点击图层名称的展开箭头即可打开或切换图层控制面板。

```{=html}
<!-- -->
```
-   不同类型的图层控制面板中展示的内容有所不同。

2.4.2.2.2.1 **Image底图控制面板**

-   Opactiy滑块：滑动滑块或输入数字调整底图的透明度。

```{=html}
<!-- -->
```
-   Normalization滑块区：对底图图像数据进行归一化，左右滑动或输入数值可调整其最大最小值。

![](/logo.svg){width="2.7708333333333335in" height="2.25in"}

图 2.5.2.2.2.1 Image底图控制面板

2.4.2.2.2.2 **蛋白IF图层的控制面板**

可为不同的IF图层选择不同的颜色，面板样式同2.5.2.2.1-2基因/蛋白merge图层调色板。

2.4.2.2.2.3 **基因热图的控制面板**

-   binsize下拉菜单：提供当前芯片下的不同bin的展示。画布区会调整热图至所选择的分辨率大小来显示。在这个模式下鼠标滚动缩放页面不会改变
    binsize。

\*如果设置的 binsize
过小，可能会导致加载页面速度变慢，需要耐心等待，建议放大到局部后在切换较小的binsize。

-   Opacity滑块：滑动滑块或者输入数字调整热图区域中的散点透明度。

![](/logo.svg){width="5.75in" height="2.6979166666666665in"}

图 2.5.2.2.2.3 - 1 基因热图控制面板

![](/logo.svg){width="5.75in" height="2.6979166666666665in"}

图 2.5.2.2.2.3 - 2 调节透明度对比图

2.4.2.2.2.4 **聚类图层控制面板**

-   Opactiy滑块：滑动滑块调整底图的透明度。

![](/logo.svg){width="5.75in" height="2.6979166666666665in"}

图 2.5.2.2.2.4 -聚类图像透明度对比图

2.4.2.2.3 **binsize选择**

在基因/蛋白表达热图及聚类图层下，提供当前数据的不同分辨率的展示，包括bin1、bin10、bin20、bin50、bin100、bin200、bin500以及cellbin（若该芯片有cellbin数据则包含，否则不包含）。

-   表达热图及聚类图：切换binsize画布区会调整热图至所选择的分辨率大小来显示。按住ctrl并滚动鼠标也可切换不同binsize。如图2.5.2.2.3 -
    1。

\*如果设置的 binsize
过小（如bin1），数据量过大可能会导致加载页面速度变慢，需要耐心等待，建议放大到局部后再切换较小的binsize。。

![](/logo.svg){width="5.75in" height="2.6979166666666665in"}

图 2.5.2.2.3 - 1 基因/蛋白表达热图切换binsize操作对比图

-   基因/蛋白merge图：勾选蛋白图像后，切换binsize，画布区会调整蛋白图像至所选择的分辨率大小来显示。按住ctrl并滚动鼠标可以切换不同binsize。如图2.5.2.2.3 -
    2。

\*如果设置的 binsize
过小（如bin1），数据量过大可能会导致加载页面速度变慢，需要耐心等待，建议放大到局部后再切换较小的binsize。

![](/logo.svg){width="5.75in" height="2.6979166666666665in"}

图 2.5.2.2.3 - 2 基因/蛋白merge图切换binsize操作对比图

2.4.2.2.4 **手动工具菜单**

2.4.2.2.4.1 **撤回**

![](/logo.svg){width="0.3333333333333333in"
height="0.3020833333333333in"}

点击图标可返回上一步操作，或使用快捷键Ctrl+Z。

2.4.2.2.4.2 **重置**

![](/logo.svg){width="0.34375in" height="0.25in"}

点击图标可清除当前所有操作，返回至任务打开时的初始状态。

2.4.2.2.4.3 **游标**

![](/logo.svg){width="0.3541666666666667in"
height="0.2916666666666667in"}

点击图标可退出手动工具模式。

2.4.2.2.4.4 **手动配准**

![](/logo.svg){width="0.375in" height="0.34375in"}

点击图标即可进入手动配准模式，再次点击可退出手动配准模式。

\*手动配准教程详见章节2.5.3.5。

2.4.2.2.4.5 **套索**

![](/logo.svg){width="0.34375in" height="0.3020833333333333in"}

点击图标即可进入套索模式，再次点击退出套索模式。

\*套索工具教程详见章节2.5.3.6。

2.4.2.2.4.6 **过滤（开发中）**

![](/logo.svg){width="0.3645833333333333in" height="0.3125in"}

点击图标即可根据MID count、聚类等信息对当前表达矩阵进行过滤。

2.4.2.2.4.7 **标注（开发中）**

![](/logo.svg){width="0.34375in" height="0.3333333333333333in"}

点击图标对当前图像进行标注。

2.4.2.2.4.8 **配准模板**

![](/logo.svg){width="0.3541666666666667in"
height="0.3020833333333333in"}

点击图标即可打开表达矩阵的配准模板，可在此基础上对图像进行配准。

2.4.2.2.5 **聚类列表**

Clustering 页面展示聚类分析结果的列表。

-   复选框：点击复选框，主图区展示选中的聚类数据。

```{=html}
<!-- -->
```
-   名称：鼠标键入后可修改选中的聚类名称。

\*聚类图例中，鼠标键入后可修改选中的聚类名称。

-   颜色：点击右侧打开调色板，拖动拾色器上的小圆圈/彩虹带即可修改选中的聚类颜色。

![](/logo.svg){width="5.75in" height="2.6979166666666665in"}

图 2.5.2.2.5 - 聚类列表

2.4.2.3 **工具区**

-   缩放进度条：控制主界面图像大小。如下图2.5.2.3 - 1工具区。

```{=html}
<!-- -->
```
-   放大按钮：

![](/logo.svg){width="0.3541666666666667in"
height="0.3333333333333333in"}

点击即可放大图像。

-   缩小按钮：

![](/logo.svg){width="0.375in" height="0.34375in"}

点击即可缩小图像。

-   滑动条：拖动滑动条或滑动鼠标滚轮即可对图像进行缩小或放大操作。

\* 缩放图像也可通过滑动鼠标滚轮操作实现。

![](/logo.svg){width="5.75in" height="2.6979166666666665in"}

图 2.5.2.3 - 1工具区

-   保存状态按钮：

![](/logo.svg){width="0.375in" height="0.375in"}

保存当前图像的状态，便于后续可直接查看此次状态。

操作：点击按钮，打开保存状态弹窗，在弹窗中输入保存状态的名称，点击submit按钮提交即可保存。如图2.5.2.3 -
2保存状态。操作：点击按钮，打开保存状态弹窗，在弹窗中输入保存状态的名称，点击submit按钮提交即可保存。如图2.5.2.3 -
2保存状态

> \*状态保存最多保存三条，超过三条后，每次保存都覆盖最早的文件。

![](/logo.svg){width="5.75in" height="2.6979166666666665in"}

图 2.5.2.3 - 2 保存状态

-   加载状态按钮：

![](/logo.svg){width="0.3333333333333333in" height="0.375in"}

加载某次保存的状态。如图2.5.2.3 - 3.

操作：点击按钮，打开加载状态弹窗，在弹窗中选择要加载的状态名称，点击submit按钮即可打开选择的状态。

![](/logo.svg){width="5.75in" height="2.6979166666666665in"}

图 2.5.2.3 - 3加载状态

-   导出高清图像按钮：

![](/logo.svg){width="0.34375in" height="0.3229166666666667in"}

导出高清图像按钮，操作如图2.5.2.3 - 4。

\*Screenshot
image：当前屏幕图像的截图（最终以截图的形式导出图像，缩放时图像会模糊）。

\*HD image：当前屏幕图像的高清图。

![](/logo.svg){width="5.75in" height="2.6979166666666665in"}

图 2.5.2.3 - 4导出高清图像

2.4.2.4 **主图区**

主画布区展示组织区域分布和表达量。

-   信息悬浮框：鼠标悬停在画布上会显示该点的坐标位置（x,
    y）和该点捕获到的基因种类数及对应的 MID
    总数。可通过图层选择中的"Statistics"开关来控制悬浮框的显示与隐藏。

```{=html}
<!-- -->
```
-   散点颜色： 散点颜色指示 MID 数的高低，数值可参考画布右下角的色阶尺；

```{=html}
<!-- -->
```
-   物理比例尺：画布左下方展示组织真实物理比例尺。通过图层选择中的"Scale
    Bar"开关来控制比例尺的显示与隐藏。

```{=html}
<!-- -->
```
-   色阶尺：画布右下方展示组织MID数与其对应的色阶尺。通过图层选择中的"Color
    Bar"开关来控制色阶尺的显示与隐藏。

```{=html}
<!-- -->
```
-   放大画布：滚轮向前（上）滚动即可放大画布。

```{=html}
<!-- -->
```
-   缩小画布：滚轮向后（下）滚动即可缩小画布。

```{=html}
<!-- -->
```
-   移动画布：使用鼠标拖拽（单机鼠标左键不放并移动鼠标）即可移动画布。

```{=html}
<!-- -->
```
-   切换binsize：使用键盘ctrl + 滚轮可切换binsize。

\*ctrl +
滚轮向前（上）滚动可切换较小的分辨率（binsize选择下拉菜单中，当前binsize的前一个）。

\*ctrl +
滚轮向后（下）滚动可切换较小的分辨率（binsize选择下拉菜单中，当前binsize的后一个）。

例如binsize下拉菜单的顺序为：bin1，bin10，bin20，bin50，bin100，bin200，bin500，cellbin。当前binsize为bin100，操作ctrl +
滚轮向前（上）切换至bin50，操作ctrl + 滚轮向后（下）切换至bin200。

2.4.2.5 **图例区**

图例区包含两部分：上方为图例（基因/蛋白图例、聚类图例），下方为聚类参数。

-   基因/蛋白图例：在gene基因/蛋白列表中勾选复选框蛋白后，蛋白图例自动显示（通过图层选择中的\"Legend\"开关来控制图例的展示与隐藏）。

```{=html}
<!-- -->
```
-   聚类图例：选择cellbin时，自动展示所有聚类，可通过聚类图例修改某个聚类label名称，也可通过聚类列表修改某个聚类label名称。（通过图层选择中的\"Legend\"开关来控制图例的展示与隐藏）。

```{=html}
<!-- -->
```
-   聚类参数：当前聚类所用参数（通过图层选择中的\"Clustering
    Parameter\"开关来控制图例的展示与隐藏）。

2.4.3 **操作演示（具体实现）**

2.4.3.1 **转录组数据可视化**

-   打开Gene Table列表：点击菜单栏Gene
    下拉菜单（菜单栏说明详见章节2.5.2.2）展开Gene
    Table列表/控制区如下图2.5.3.1-1。

![](/logo.svg){width="5.75in" height="2.6979166666666665in"}

图 2.5.3.1 - 1 打开Gene Table列表

-   查看单基因：在Gene
    Table列表中点击基因名称，以Gm42418为例如下图2.5.3.1 - 2。

![](/logo.svg){width="5.75in" height="2.6979166666666665in"}

图 2.5.3.1 - 2 单基因

-   打开基因热图图层控制面板：点击图层选择下拉菜单，点击基因热图（"Gene
    Heatmap"）即可。如图2.5.3.1 - 3。

![](/logo.svg){width="5.75in" height="2.6979166666666665in"}

图 2.5.3.1 - 3 打开图层控制面板

-   切换binsize：展开binsize选择下拉菜单（章节2.5.2.2.3），选择bin即可。如图2.5.3.1 -
    4。

> \*如果设置的 binsize
> 过小，可能会导致加载页面速度变慢，需要耐心等待，或放大到局部后在切换较小的binsize。

![](/logo.svg){width="5.75in" height="2.6979166666666665in"}

图 2.5.3.1 - 4 切换binsize

-   调整散点透明度：在基因热图控制面板中，滑动Opacity滑块即可调整散点透明度。如图2.5.3.1 -
    5，2.5.3.1 - 6。

![](/logo.svg){width="5.75in" height="2.6979166666666665in"}

图 2.5.3.1 - 5 调整散点透明度

![](/logo.svg){width="5.75in" height="2.6979166666666665in"}

图 2.5.3.1 - 6 调整透明度对比图

-   Gene/Protein Table操作：

6.  筛选：在输入框中输入基因/蛋白名称回车执行筛选操作。如图2.5.3.1 -
    7中以"mt"筛选为例。（多名称筛选用英文逗号隔开，例如：mt,Gm）

```{=html}
<!-- -->
```
7.  排序：点击表头列名后的排序按钮即可对该字段进行排序。如图2.5.3.1 -
    7中以"Gene"降序为例。

```{=html}
<!-- -->
```
8.  分页：点击"上一页"按钮进入上一页，点击"下一页"按钮进入下一页，在页码处输入数字并回车进入该页码页。

-   取消单基因/蛋白：点击"Gene/Protein"列表中的"RESET"按钮即可取消单基因/蛋白展示重置到初始状态。

```{=html}
<!-- -->
```
-   关闭Gene
    Table控制面板：再次点击"Gene/Protein"下拉菜单即可收起Gene/Protein列表。

![](/logo.svg){width="5.75in" height="2.6979166666666665in"}

图 2.5.3.1 - 7 Gene Table操作

2.4.3.2 **Color Bar自定义**

本次操作示例同样以转录数据可视化中的数据为例。

点击展开图层下拉菜单并点击"Color Bar"打开自定义弹窗如图2.5.3.8。

![](/logo.svg){width="5.75in" height="2.6979166666666665in"}

图 2.5.3.2 - 1 color range自定义弹窗

-   Auto compute bounds of color
    domain：自动计算模式。由软件自动计算得出的图像颜色。选择该模式则不能操作下方手动计算输入框。点击Confirm按钮即刻生效。

```{=html}
<!-- -->
```
-   Set bounds of the color
    domain：手动设置模式。点击后可在下方输入框中最小值和最大值。点击Confirm按钮后即刻生效。

\*手动设置模式下：

1.只能输入正整数。

2.最小值不大于最大值。

3.最大值的上线为50000000。

4.最大最小值数值不能相等。

5.该模式直至选择自动计算后结束。

![](/logo.svg){width="5.75in" height="2.6979166666666665in"}

图 2.5.3.2 - 2 手动设置

![](/logo.svg){width="3.8125in" height="1.7916666666666667in"}

图 2.5.3.2 - 3 自动计算图像

![](/logo.svg){width="3.84375in" height="1.8020833333333333in"}

图 2.5.3.2 - 4 手动设置图像

2.4.3.3 **基因/蛋白操作**

本次操作以转录组可视化中的数据为例。

-   选择一个或多个基因/蛋白，点击"Selected"分组右侧的"更多"按钮，可调节多个基因/蛋白展示形式，包含Multi-colored和Heatmap两种形式，如图2.5.3.3 -
    4、2.5.3.3 - 5。

![](/logo.svg){width="5.75in" height="2.8645833333333335in"}

图 2.5.3.3 - 1 多基因/蛋白Multi-colored效果

![](/logo.svg){width="5.75in" height="2.8645833333333335in"}

图 2.5.3.3 - 2 多基因/蛋白Heatmap效果

-   Multi-colored展示效果调节：

选中基因/蛋白后，点击调色盘，即可展开对应基因/蛋白的调色板。如图2.5.3.3 -
3。

-   颜色：可采取以下方式调节，①拖动色盘、彩虹条；②输入RGB或HEX代码；③选择常用颜色。

```{=html}
<!-- -->
```
-   透明度：滑动Opacity滑块或输入数值调节图层的透明度。

```{=html}
<!-- -->
```
-   归一化：滑动Normalization滑块或在滑块上方左右两边输入数值即可。

```{=html}
<!-- -->
```
-   亮度：滑动Brightness滑块输入数值调节图层的亮度。

```{=html}
<!-- -->
```
-   对比度：滑动Contrast滑块输入数值调节图层的对比度。

![](/logo.svg){width="5.75in" height="2.8645833333333335in"}

图 2.5.3.3 - 3 Multi-colored展示效果调节

-   Heatmap展示效果调节：

在Layer面板中，点击Gene Heatmap图层，在展开面板中进行调节。

-   配色：四种配色方案可选。

```{=html}
<!-- -->
```
-   散点大小：拖动Spot Size可调节散点大小。

```{=html}
<!-- -->
```
-   透明度：拖动Opacity可调节散点大小。

```{=html}
<!-- -->
```
-   色阶尺：

> ![](/logo.svg){width="5.75in" height="2.8541666666666665in"}

-   重置：点击Gene Table
    "Selected"分组最上方的复选框，即可取消全部基因选择，重置为热图初始状态。

2.4.3.4 **cellbin数据可视化**

本次操作示例同样以转录数据可视化中的数据为例。

-   打开cellbin：点击菜单栏中的binsize选择下拉菜单选择cellbin。

```{=html}
<!-- -->
```
-   打开cellbin图层控制面板：点击图层下拉菜单中的"Cell Cluster"。

```{=html}
<!-- -->
```
-   展示相同标签/label数据：勾选聚类列表中相应的标签/label前的复选框。以cluster1，cluster3为例如图2.5.3.4 -
    1。

![](/logo.svg){width="5.75in" height="2.6979166666666665in"}

图 2.5.3.4 - 1 cellbin操作图

-   退出cellbin：在binsize选择下拉菜单中选择普通bin即可。

```{=html}
<!-- -->
```
-   cellbin细节如图2.5.3.4 - 2。（以其他数据为例）

![](/logo.svg){width="5.75in" height="2.71875in"}

图 2.5.3.4 - 2 cellbin细节

2.4.3.5 **手动配准操作**

-   开启手动配准：点击手动配准工具按钮开启手动配准模式，弹出配准窗口，如图2.5.3.5
    -1。

![](/logo.svg){width="2.875in" height="4.041666666666667in"}

图2.5.3.5 -1 手动配准工具面板

-   平移图像：

在"Please input transform
size"中输入要位移的单位。本次案例中以500个单位平移。

点击上/下/左/右方向按钮，每点击一次，图像向点击方向平移500个单位。

-   翻转：点击翻转按钮，绕Y轴翻转180度。

![](/logo.svg){width="0.3541666666666667in"
height="0.3020833333333333in"}

-   旋转：点击旋转按钮，绕Z轴逆时针旋转90度。

![](/logo.svg){width="0.3854166666666667in"
height="0.3229166666666667in"}

-   高精度配准：点击即可开启高精度配准，再次点击取消高精度配准。

\*建议在拼接质量较高时使用此功能，否则请关闭此功能，手动配准至可接受的精度。

![](/logo.svg){width="0.4270833333333333in" height="0.3125in"}

-   重置：点击"reset"重置按钮，transform图像将重置到初始状态，即平移0个单位，翻转0次，旋转0次。

```{=html}
<!-- -->
```
-   提交配准任务：点击"submit"按钮提交配准任务。

```{=html}
<!-- -->
```
-   退出手动配准：再次点击手动配准工具按钮即可退出。（也可通过点击游标退出）

![](/logo.svg){width="5.75in" height="2.6979166666666665in"}

图2.5.3.5 -2 手动配准操作

2.4.3.6 **套索操作**

-   进入套索模式：点击菜单栏中套索按钮进入套索模式，再次点击则退出。

```{=html}
<!-- -->
```
-   圈套封闭图形（新增区域）：按住键盘ctrl +
    鼠标左键并移动鼠标开始圈套。

```{=html}
<!-- -->
```
-   圈套空洞图形（删除区域）：按住键盘alt + 鼠标左键并移动鼠标开始圈套。

\*新增或删除区域都可进行多次操作。

-   结束一次圈套：点击Enter即可结束一次圈套，弹出套索统计窗口。统计信息包含Total
    MID count、Mean/Median MID、Mean/Median gene types。

![](/logo.svg){width="2.1979166666666665in"
height="2.7395833333333335in"}

图 3.4.6 -1 套索统计面板

-   输入套索名称：在"New
    label"中填写套索区域名称，用户可根据套索区域的性质自定义名称。

```{=html}
<!-- -->
```
-   修改圈套区域：点击Continue即可在已有的区域上继续修改，修改完成后再次点击Enter弹出窗口。

```{=html}
<!-- -->
```
-   选择导出binsize：点击"Select bin
    size"下拉菜单，选择要导出的binsize即可，可支持多选（开发中）。

```{=html}
<!-- -->
```
-   删除所有套索图形：在弹出窗口中点击 "x"，关闭弹窗并删除所有套索图形。

```{=html}
<!-- -->
```
-   提交套索任务：弹窗中点击"Submit"按钮即可提交任务。如图2.5.3.6-2。

```{=html}
<!-- -->
```
-   退出套索工具：再次点击套索按钮即可退出。（也可通过点击游标退出）

![](/logo.svg){width="5.75in" height="2.6979166666666665in"}

图 2.5.3.6 -2 提交套索任务

2.4.3.7 **配准模板操作**

-   打开配准模板：点击配准模板按钮打开配准模板（由多个黄色十字线组成）。

```{=html}
<!-- -->
```
-   放大图像：在主图区域滑动鼠标滚轮即可放大图像。将图像放大至黄色十字线清晰可见即可。

```{=html}
<!-- -->
```
-   调整图像对比度（以ssDNA为例）：展开图层下拉菜单，点击ssDNA名称打开图层控制面板，调节Normalized使得ssDNA图像中可以看到清晰的track线即可，此时可以观察track线与配准模板的拟合效果。如图2.5.3.7。

```{=html}
<!-- -->
```
-   退出配准模板模式：再次点击配准模板按钮即可退出。（也可通过点击游标退出）

![](/logo.svg){width="5.75in" height="2.6979166666666665in"}

图 2.5.3.7 配准模板

2.4.3.8 **IF图层操作**

当.rpi文件中包含蛋白图层时才可以显示。

-   打开IF图层：点击展开图层下拉菜单，勾选"IF protein
    Layer"目录下的蛋白图像即可。如图2.5.3.8。

\*IF Protein Layer目录下将展示该芯片下的所有IF蛋白组。

![](/logo.svg){width="5.75in" height="2.6979166666666665in"}

图 2.5.3.8 IF图层

-   查看蛋白：点击展开的Gene列表，勾选复选框打开相应单基因蛋白图像。

```{=html}
<!-- -->
```
-   调整蛋白颜色：参考章节2.5.2.2.2.2 蛋白IF图层的控制面板操作即可。

```{=html}
<!-- -->
```
-   退出IF图层：反勾选"IF Protein Layer"即可退出。

2.5 **镜像管理**

2.5.1 **自定义镜像**

用户在进行数据分析时，通常需要安装各种类型的工具镜像，为方便用户能够在平台上使用各种类型的生信工具，SSTOmics
Cloud提供自定义镜像的功能，通过自定义镜像，用户可自由进行镜像安装。点击左侧导航栏镜像管理，进入到镜像管理页面。点击自定义镜像，新建镜像。

![](/logo.svg){width="5.75in" height="2.375in"}

2.5.1.1 **工具包镜像安装**

输入镜像名称，选择一个基础镜像，添加镜像描述和标签。在Python3或R部分点击添加，系统弹出工具包名称和工具包版本输入框。例如需安装一个Python的Scanpy工具包，可以在工具包名称填写Scanpy，版本可以填写，也可以不填写，若不填写，系统将安装最新版本的Scanpy。点击Build，系统将创建Scanpy镜像。

![](/logo.svg){width="5.75in" height="2.5104166666666665in"}

2.5.1.2 **bash镜像安装**

输入镜像名称，选择一个基础镜像，添加镜像描述和标签。选择bash指令，在bash指令输入shell命令行代码，进行镜像安装。例如需安装一个Samtools工具镜像，输入samtools的安装指令和环境配置，系统将按照指令执行安装。点击Build，系统将创建Samtools镜像。

![](/logo.svg){width="5.75in" height="2.375in"}

2.5.2 **镜像查看**

镜像构建提交后，可在镜像管理页面，查看镜像构建状态，包括构建成功，构建失败，构建中等。

![](/logo.svg){width="5.75in" height="2.4166666666666665in"}

2.5.3 **发布镜像**

构建成功得镜像，可以点击发布到公共库按钮，进行镜像发布，方便其他人复用镜像。已发布得镜像，可在公共库查看。

![](/logo.svg){width="5.75in" height="2.3541666666666665in"}

![](/logo.svg){width="5.75in" height="2.0104166666666665in"}

2.5.4 **添加公共镜像**

公共镜像库的镜像，用户可根据需要，将公共镜像库的镜像添加到项目中，进行使用。

![](/logo.svg){width="5.75in" height="2.34375in"}

2.5.5 **镜像使用**

公共库添加的镜像和用户自定义创建成功的镜像，可在运行notebook的时候选择使用。

![](/logo.svg){width="5.75in" height="2.46875in"}

2.6 **StereoGPT**

StereoGPT调用Open
AI的接口，支持用户进行人工智能问答和提问，方便用户进行代码编写和检查，支持时空组学数据智能分析和运用。

2.6.1 **StereoGPT入口**

通过STOmics Cloud首页，点击页面右下角chatGPT图标按钮，启动StereoGPT。

![](/logo.svg){width="5.75in" height="2.7708333333333335in"}

2.6.2 **StereoGPT问答**

在问答输入框输入问题，可进行问答，点击重新问答，可讲问题重新提问，重新获得新的答案。

![](/logo.svg){width="5.75in" height="2.7916666666666665in"}


<!-- This is an example of a project homepage. You can place your main content here.

To use this layout, you need to set `home: true` in the page front matter.

For related descriptions of configuration items, please see [Project HomePage Layout Config](https://theme-hope.vuejs.press/guide/layout/home/). -->

